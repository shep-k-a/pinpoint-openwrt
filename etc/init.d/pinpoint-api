#!/bin/sh /etc/rc.common
# Pinpoint API Server - init.d script

START=99
STOP=10
USE_PROCD=1

PROG="/opt/pinpoint/backend/main.py"
PIDFILE="/var/run/pinpoint-api.pid"

start_service() {
    procd_open_instance
    procd_set_param command python3 "$PROG"
    procd_set_param respawn
    procd_set_param stdout 1
    procd_set_param stderr 1
    procd_set_param pidfile "$PIDFILE"
    procd_close_instance
    
    logger -t pinpoint-api "API server started"
}

stop_service() {
    logger -t pinpoint-api "API server stopped"
}
